import{x as I,y as w,r as a,n as e,F as S}from"./components-BNpk1LYi.js";import{I as B,g as E}from"./generoservice-C3ydkEny.js";function q(){var n,m,c,x,p,g,u,h,f;const{autor:s}=I(),r=w(),[b,j]=a.useState([]),[l,i]=a.useState(null),[o,N]=a.useState(!1);a.useEffect(()=>{(async()=>{try{const t=await E();j(t)}catch(t){console.error("Error al cargar datos:",t)}})(),s!=null&&s.foto&&i(s.foto)},[s]);const y=d=>{i(d)},v=d=>{N(!0)};return e.jsx("div",{children:e.jsxs("div",{className:"container rounded-lg max-w-6xl mx-auto mt-7 mb-7",children:[e.jsx("div",{className:"flex justify-between items-center ml-40",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-[#002847]",children:"Editar autor"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Modifique los detalles del autor"})]})}),(r==null?void 0:r.error)&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 m-6 rounded",children:[e.jsx("p",{className:"font-bold",children:"Error:"}),e.jsx("p",{children:r.error}),r.debugInfo&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"cursor-pointer text-sm",children:"Ver detalles técnicos"}),e.jsx("pre",{className:"mt-2 text-xs overflow-auto max-h-40 p-2 bg-red-50",children:JSON.stringify(r.debugInfo,null,2)})]})]}),e.jsxs(S,{method:"post",className:"p-6",encType:"multipart/form-data",onSubmit:v,children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Nombre"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"nombre",defaultValue:s==null?void 0:s.nombre,placeholder:"Ingrese el nombre",className:`w-full px-3 py-2 border ${(n=r==null?void 0:r.errores)!=null&&n.nombre?"border-red-500":"border-gray-300"} rounded`,required:!0}),((m=r==null?void 0:r.errores)==null?void 0:m.nombre)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errores.nombre})]})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Apellido"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"apellido",defaultValue:(s==null?void 0:s.apellido)||"",placeholder:"Ingrese el apellido",className:`w-full px-3 py-2 border ${(c=r==null?void 0:r.errores)!=null&&c.apellido?"border-red-500":"border-gray-300"} rounded`,required:!0}),((x=r==null?void 0:r.errores)==null?void 0:x.apellido)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errores.apellido})]})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Género"}),e.jsxs("div",{children:[e.jsxs("select",{name:"generoId",defaultValue:(s==null?void 0:s.generoId)||"",className:`w-full px-3 py-2 border ${(p=r==null?void 0:r.errores)!=null&&p.generoId?"border-red-500":"border-gray-300"} rounded`,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un género"}),b.map(d=>e.jsx("option",{value:d.id,children:d.nombre},d.id))]}),((g=r==null?void 0:r.errores)==null?void 0:g.generoId)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errores.generoId})]})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Nacionalidad"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"nacionalidad",placeholder:"Ingrese la nacionalidad",className:`w-full px-3 py-2 border ${(u=r==null?void 0:r.errores)!=null&&u.nacionalidad?"border-red-500":"border-gray-300"} rounded`,required:!0}),((h=r==null?void 0:r.errores)==null?void 0:h.nacionalidad)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errores.nacionalidad})]})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-start gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700 pt-2",children:"Biografía"}),e.jsx("textarea",{name:"biografia",placeholder:"Ingrese la biografía",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Idioma"}),e.jsx("input",{type:"text",name:"idioma",defaultValue:(s==null?void 0:s.idioma)||"",placeholder:"Ingrese el idioma",className:"w-full px-3 py-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"flex flex-col items-center my-10",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto del autor"}),e.jsx(B,{onBase64Generated:y,stripPrefix:!0}),(l||(s==null?void 0:s.foto))&&e.jsx("div",{className:"mt-4 max-w-lg mx-auto",children:e.jsx("img",{src:l?l.startsWith("data:")?l:`data:image/jpeg;base64,${l}`:(f=s==null?void 0:s.foto)!=null&&f.startsWith("data:")?s.foto:`data:image/jpeg;base64,${s==null?void 0:s.foto}`,alt:"Portada",className:"rounded-3xl border"})}),e.jsx("input",{type:"hidden",name:"foto",value:l||(s==null?void 0:s.foto)||""})]})]}),e.jsxs("div",{className:"flex justify-end mt-8 gap-6",children:[e.jsx("button",{type:"submit",className:"bg-[#002847] text-white px-6 py-2 rounded",disabled:o,children:o?"Guardando...":"Guardar cambios"}),e.jsx("a",{href:"/panel",className:"bg-gray-200 text-gray-800 px-6 py-2 rounded text-center",children:"Cancelar"})]})]})]})})}export{q as default};
