import{x as E,y as G,r as d,n as e,F as $}from"./components-BNpk1LYi.js";import{I as C,g as T}from"./generoservice-C3ydkEny.js";import{g as k}from"./autorservice-DjIETraV.js";function _(){var c,m,x,u,p,h,g,j,b,f;const{audiolibro:t}=E();console.log(t);const r=G(),[N,y]=d.useState([]),[v,I]=d.useState([]),[l,i]=d.useState(null),[F,w]=d.useState(null),[n,A]=d.useState(!1),S=s=>{var o;const a=((o=s.target.files)==null?void 0:o[0])||null;w(a)};d.useEffect(()=>{(async()=>{try{const a=await k(),o=await T();y(a),I(o)}catch(a){console.error("Error al cargar datos:",a)}})(),t!=null&&t.portada&&i(t.portada)},[t]);const q=s=>{i(s)},B=s=>{A(!0)};return e.jsx("div",{children:e.jsxs("div",{className:"container rounded-lg max-w-6xl mx-auto mt-7 mb-7",children:[e.jsx("div",{className:"flex justify-between ml-40 items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-[#002847]",children:"Editar audiolibro"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Modifique los detalles del audiolibro"})]})}),(r==null?void 0:r.error)&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 m-6 rounded",children:[e.jsx("p",{className:"font-bold",children:"Error:"}),e.jsx("p",{children:r.error}),r.debugInfo&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"cursor-pointer text-sm",children:"Ver detalles técnicos"}),e.jsx("pre",{className:"mt-2 text-xs overflow-auto max-h-40 p-2 bg-red-50",children:JSON.stringify(r.debugInfo,null,2)})]})]}),e.jsxs($,{method:"post",className:"p-6",encType:"multipart/form-data",onSubmit:B,children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Título"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"titulo",placeholder:"Ingrese el título",className:`w-full px-3 py-2 border ${(c=r==null?void 0:r.errores)!=null&&c.titulo?"border-red-500":"border-gray-300"} rounded`,required:!0}),((m=r==null?void 0:r.errores)==null?void 0:m.titulo)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errores.titulo})]})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Autor"}),e.jsxs("div",{children:[e.jsxs("select",{name:"autorId",defaultValue:t.autorId,className:`w-full px-3 py-2 border ${(x=r==null?void 0:r.errores)!=null&&x.autorId?"border-red-500":"border-gray-300"} rounded`,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un autor"}),N.map(s=>e.jsxs("option",{value:s.id,children:[s.nombre," ",s.apellidos]},s.id))]}),((u=r==null?void 0:r.errores)==null?void 0:u.autorId)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errores.autorId})]})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Género"}),e.jsxs("div",{children:[e.jsxs("select",{name:"generoId",className:`w-full px-3 py-2 border ${(p=r==null?void 0:r.errores)!=null&&p.generoId?"border-red-500":"border-gray-300"} rounded`,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un género"}),v.map(s=>e.jsx("option",{value:s.id,children:s.nombre},s.id))]}),((h=r==null?void 0:r.errores)==null?void 0:h.generoId)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errores.generoId})]})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Duracion"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"duracion",placeholder:"Ingrese la duración",className:`w-full px-3 py-2 border ${(g=r==null?void 0:r.errores)!=null&&g.duracion?"border-red-500":"border-gray-300"} rounded`,required:!0}),((j=r==null?void 0:r.errores)==null?void 0:j.duracion)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errores.duracion})]})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-start gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700 pt-2",children:"Tamaño MB"}),e.jsx("input",{type:"text",name:"tamaño_m_b",placeholder:"Ingrese el tamaño",className:"w-full px-3 py-2 border border-gray-300 rounded resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Idioma"}),e.jsx("input",{type:"text",name:"idioma",placeholder:"Ingrese el idioma",className:"w-full px-3 py-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Narrador"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"narrador",placeholder:"Ingrese el narrador",className:`w-full px-3 py-2 border ${(b=r==null?void 0:r.errores)!=null&&b.narrador?"border-red-500":"border-gray-300"} rounded`,required:!0}),((f=r==null?void 0:r.errores)==null?void 0:f.isnarradorbn)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errores.narrador})]})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{htmlFor:"pdf",className:"text-right font-medium text-gray-700",children:"Audio o video"}),e.jsx("div",{className:"flex",children:e.jsx("input",{type:"file",id:"pathArchivo",name:"pathArchivo",accept:".mp3, .mp4",required:!0,onChange:S})})]}),e.jsxs("div",{className:"flex flex-col items-center my-10",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Portada del audiolibro"}),e.jsx(C,{onBase64Generated:q,stripPrefix:!0}),l&&e.jsx("div",{className:"mt-4 max-w-lg mx-auto",children:e.jsx("img",{src:l.startsWith("data:")?l:`data:image/jpeg;base64,${l}`,alt:"Portada",className:"rounded-3xl border"})}),e.jsx("input",{type:"hidden",name:"portada",value:l||""})]})]}),e.jsxs("div",{className:"flex justify-end mt-8 gap-6",children:[e.jsx("button",{type:"submit",className:"bg-[#002847] text-white px-6 py-2 rounded",disabled:n,children:n?"Guardando...":"Guardar"}),e.jsx("a",{href:"/panel",className:"bg-gray-200 text-gray-800 px-6 py-2 rounded text-center",children:"Cancelar"})]})]})]})})}export{_ as default};
