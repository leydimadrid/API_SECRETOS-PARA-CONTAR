import{x,n as e,L as i}from"./components-BNpk1LYi.js";import{C as d}from"./CardAudiolibro-CCafGUog.js";import{D as n}from"./download-C1YQC0jc.js";import"./arrow-right-BCCq8hix.js";import"./createLucideIcon-B5GsODQJ.js";const m="http://localhost:5046/api/audiolibro";async function h(a){const s=`${m}/descargar/${a}`,l=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}});if(!l.ok)throw new Error(`Error al descargar el audiolibro: ${l.status}`);return await l.blob()}const g=()=>{const{response:a}=x();if(!a.responseElements||a.responseElements.length===0)return e.jsx("div",{className:"container mx-auto px-6 py-10",children:e.jsx("h1",{className:"text-2xl font-bold text-center",children:"No se encontró información del audiolibro"})});const s=a.responseElements[0],l=async t=>{try{const r=await h(t),c=URL.createObjectURL(r),o=document.createElement("a");o.href=c,o.download=`${s.pathArchivo}`,o.click(),URL.revokeObjectURL(c)}catch(r){console.error(r)}};return e.jsxs("div",{children:[e.jsx("div",{className:"container mx-auto px-6 md:px-12 py-4",children:e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(i,{to:"/",className:"flex items-center text-gray-600 hover:text-[#fa4616]",children:e.jsx("span",{children:"Inicio"})}),e.jsx("span",{className:"mx-2 text-gray-400",children:">"}),e.jsx(i,{to:"/audiolibros",className:"text-gray-600 hover:text-[#fa4616]",children:"Audiolibro"}),e.jsx("span",{className:"mx-2 text-gray-400",children:">"}),e.jsx("span",{className:"text-gray-800",children:s.titulo})]})}),e.jsxs("main",{className:"container mx-auto min-h-full",children:[e.jsx("div",{className:"w-full h-fit max-w-3xl mx-auto mb-8 mt-16",children:s.pathArchivo.endsWith(".mp3")?e.jsx("audio",{className:"w-full h-20",controls:!0,src:`http://localhost:5046/archivos/${s.pathArchivo}`,children:"Audio"}):e.jsx("video",{className:"w-full h-full",controls:!0,src:`http://localhost:5046/archivos/${s.pathArchivo}`,children:"Video"})}),e.jsxs("div",{className:"flex flex-col max-w-3xl mx-auto",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.generos&&s.generos.split(",").map((t,r)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:t.trim()},r))})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-[#fa4616] mb-2",children:s.titulo}),e.jsx("h2",{className:"text-xl mb-2 text-black",children:s.autor}),e.jsxs("p",{className:"text-gray-700",children:["Duración: ",s.duracion]}),e.jsx("div",{className:"flex justify-center gap-16 mb-12 mt-12",children:e.jsxs("button",{onClick:()=>l(s.id),className:"bg-[#fa4616] text-white px-6 py-3 rounded-md flex items-center hover:bg-[#f94517] transition-colors",children:["Descargar ",e.jsx(n,{className:"ml-2 h-5 w-5"})]})}),e.jsx("div",{children:e.jsx("div",{className:"flex justify-center text-center",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold",children:s.totalDescargas}),e.jsx(n,{className:"h-5 w-5 text-gray-500"})]}),s.totalDescargas==1?e.jsx("p",{className:"text-gray-600 text-sm",children:"Vez descargado"}):e.jsx("p",{className:"text-gray-600 text-sm",children:"Veces descargado"})]})})})]}),s.audiolibrosRelacionados&&s.audiolibrosRelacionados.length>0?e.jsxs("section",{className:"mt-16 max-w-6xl mx-auto mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-8 text-[#002847]",children:"Audiolibros relacionados"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 md:gap-10",children:s.audiolibrosRelacionados.map(t=>e.jsx(d,{id:t.id,titulo:t.titulo,portada:`http://localhost:5046/portadasAudio/${t.portada}`,autor:t.autor,genero:t.genero},t.id))})]}):e.jsx("div",{className:"container mx-auto px-6 py-10",children:e.jsx("h1",{className:"text-2xl font-bold text-center",children:"No hay Audiolibros relacionados"})})]})]})};export{g as default};
