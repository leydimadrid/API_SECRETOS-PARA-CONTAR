import{v,y as I,r as a,n as e,F as w}from"./components-BNpk1LYi.js";import{I as S,g as B}from"./generoservice-C3ydkEny.js";function E(){var o,i,n,m,c,x,p,g;const u=v(),r=I(),[h,b]=a.useState([]),[d,j]=a.useState(null),[t,f]=a.useState(!1);a.useEffect(()=>{(async()=>{try{const l=await B();b(l)}catch(l){console.error("Error al cargar datos:",l)}})()},[]);const N=s=>{j(s)},y=s=>{f(!0),u("/panel")};return e.jsx("div",{children:e.jsxs("div",{className:"container rounded-lg max-w-6xl mx-auto mt-7 mb-7",children:[e.jsx("div",{className:"flex justify-between ml-40 items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-[#002847]",children:"Agregar nuevo autor"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Complete los detalles del autor y suba los archivos necesarios"})]})}),(r==null?void 0:r.error)&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 m-6 rounded",children:[e.jsx("p",{className:"font-bold",children:"Error:"}),e.jsx("p",{children:r.error}),r.debugInfo&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"cursor-pointer text-sm",children:"Ver detalles técnicos"}),e.jsx("pre",{className:"mt-2 text-xs overflow-auto max-h-40 p-2 bg-red-50",children:JSON.stringify(r.debugInfo,null,2)})]})]}),e.jsxs(w,{method:"post",className:"p-6",encType:"multipart/form-data",onSubmit:y,children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Nombre"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"nombre",placeholder:"Ingrese el nombre",className:`w-full px-3 py-2 border ${(o=r==null?void 0:r.errores)!=null&&o.nombre?"border-red-500":"border-gray-300"} rounded`,required:!0}),((i=r==null?void 0:r.errores)==null?void 0:i.nombre)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errores.nombre})]})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Apellido"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"apellido",placeholder:"Ingrese el apellido",className:`w-full px-3 py-2 border ${(n=r==null?void 0:r.errores)!=null&&n.apellido?"border-red-500":"border-gray-300"} rounded`,required:!0}),((m=r==null?void 0:r.errores)==null?void 0:m.apellido)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errores.apellido})]})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Género"}),e.jsxs("div",{children:[e.jsxs("select",{name:"generoId",className:`w-full px-3 py-2 border ${(c=r==null?void 0:r.errores)!=null&&c.generoId?"border-red-500":"border-gray-300"} rounded`,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un género"}),h.map(s=>e.jsx("option",{value:s.id,children:s.nombre},s.id))]}),((x=r==null?void 0:r.errores)==null?void 0:x.generoId)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errores.generoId})]})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Nacionalidad"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"nacionalidad",placeholder:"Ingrese la nacionalidad",className:`w-full px-3 py-2 border ${(p=r==null?void 0:r.errores)!=null&&p.nacionalidad?"border-red-500":"border-gray-300"} rounded`,required:!0}),((g=r==null?void 0:r.errores)==null?void 0:g.nacionalidad)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errores.nacionalidad})]})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-start gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700 pt-2",children:"Biografía"}),e.jsx("textarea",{name:"biografia",placeholder:"Ingrese la biografía",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-[120px,1fr] items-center gap-4",children:[e.jsx("label",{className:"text-right font-medium text-gray-700",children:"Idioma"}),e.jsx("input",{type:"text",name:"idioma",placeholder:"Ingrese el idioma",className:"w-full px-3 py-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"flex flex-col items-center my-10",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto del autor"}),e.jsx(S,{onBase64Generated:N,stripPrefix:!0}),d&&e.jsx("div",{className:"mt-4 max-w-lg mx-auto",children:e.jsx("img",{src:d.startsWith("data:")?d:`data:image/jpeg;base64,${d}`,alt:"foto",className:"rounded-3xl border"})}),e.jsx("input",{type:"hidden",name:"foto",value:d||""})]})]}),e.jsxs("div",{className:"flex justify-end mt-8 gap-6",children:[e.jsx("button",{type:"submit",className:"bg-[#002847] text-white px-6 py-2 rounded",disabled:t,children:t?"Guardando...":"Guardar"}),e.jsx("a",{href:"/panel",className:"bg-gray-200 text-gray-800 px-6 py-2 rounded text-center",children:"Cancelar"})]})]})]})})}export{E as default};
